<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <h1>
            <svg class="logo-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 10.5L12 3L21 10.5V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V10.5Z" fill="#00d09c"/>
                <path d="M9 22V12H15V22" fill="#0d1117"/>
            </svg>
            Mortgage Calculator
        </h1>

        <div class="calculator-wrapper">
            <div class="input-panel" id="inputPanel">
                <div class="mortgage-tabs">
                    <button class="mortgage-tab tab-a active" id="tabA">Mortgage A</button>
                    <button class="mortgage-tab tab-b" id="tabB">Mortgage B</button>
                </div>

                <!-- Mortgage A Config -->
                <div class="mortgage-config active" id="configA">
                    <div class="input-group">
                        <label>Home Price</label>
                        <div class="input-row">
                            <span class="unit">$</span>
                            <input type="number" id="homePriceA" value="400000" min="50000" max="5000000" step="1000">
                        </div>
                        <div class="slider-container">
                            <input type="range" id="homePriceSliderA" min="50000" max="2000000" value="400000" step="5000">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Down Payment</label>
                        <div class="down-payment-row">
                            <span class="unit">$</span>
                            <input type="number" id="downPaymentA" value="80000" min="0" step="1000">
                            <div class="percent-input">
                                <input type="number" id="downPaymentPercentA" value="20" min="0" max="100" step="0.5">
                                <span class="unit">%</span>
                            </div>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="downPaymentSliderA" min="0" max="100" value="20" step="1">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Loan Term</label>
                        <div class="input-row">
                            <input type="number" id="loanTermA" value="30" min="1" max="40">
                            <span class="unit">Years</span>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="loanTermSliderA" min="1" max="40" value="30" step="1">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Interest Rate</label>
                        <div class="input-row">
                            <input type="number" id="interestRateA" value="6.5" min="0.1" max="20" step="0.01">
                            <span class="unit">%</span>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="interestRateSliderA" min="0.5" max="15" value="6.5" step="0.1">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Start Date</label>
                        <div class="date-row">
                            <select id="startMonthA"></select>
                            <select id="startYearA"></select>
                        </div>
                    </div>

                    <div class="loan-amount-display">
                        <span class="label">Loan Amount:</span>
                        <span class="value" id="loanAmountDisplayA">$320,000</span>
                    </div>
                </div>

                <!-- Mortgage B Config -->
                <div class="mortgage-config" id="configB">
                    <div class="input-group">
                        <label>Home Price</label>
                        <div class="input-row">
                            <span class="unit">$</span>
                            <input type="number" id="homePriceB" value="400000" min="50000" max="5000000" step="1000">
                        </div>
                        <div class="slider-container">
                            <input type="range" id="homePriceSliderB" min="50000" max="2000000" value="400000" step="5000">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Down Payment</label>
                        <div class="down-payment-row">
                            <span class="unit">$</span>
                            <input type="number" id="downPaymentB" value="80000" min="0" step="1000">
                            <div class="percent-input">
                                <input type="number" id="downPaymentPercentB" value="20" min="0" max="100" step="0.5">
                                <span class="unit">%</span>
                            </div>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="downPaymentSliderB" min="0" max="100" value="20" step="1">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Loan Term</label>
                        <div class="input-row">
                            <input type="number" id="loanTermB" value="15" min="1" max="40">
                            <span class="unit">Years</span>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="loanTermSliderB" min="1" max="40" value="15" step="1">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Interest Rate</label>
                        <div class="input-row">
                            <input type="number" id="interestRateB" value="6.0" min="0.1" max="20" step="0.01">
                            <span class="unit">%</span>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="interestRateSliderB" min="0.5" max="15" value="6.0" step="0.1">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Start Date</label>
                        <div class="date-row">
                            <select id="startMonthB"></select>
                            <select id="startYearB"></select>
                        </div>
                    </div>

                    <div class="loan-amount-display">
                        <span class="label">Loan Amount:</span>
                        <span class="value" id="loanAmountDisplayB">$320,000</span>
                    </div>
                </div>

                <div class="chart-card left-column-chart">
                    <h3>ðŸ“Š Balance Comparison</h3>
                    <div class="chart-container">
                        <canvas id="paymentChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="results-panel">
                <div class="summary-cards">
                    <div class="summary-card card-a">
                        <div class="card-label">Mortgage A</div>
                        <div class="monthly-payment">
                            <div class="label">Monthly Payment</div>
                            <div class="amount" id="monthlyPaymentA">$2,022</div>
                        </div>
                        <div class="payment-breakdown">
                            <div class="breakdown-item principal">
                                <div class="label">Principal</div>
                                <div class="value" id="principalAmountA">$320,000</div>
                            </div>
                            <div class="breakdown-item interest">
                                <div class="label">Total Interest</div>
                                <div class="value" id="totalInterestA">$407,920</div>
                            </div>
                            <div class="breakdown-item total-interest">
                                <div class="label">Int/Prin Ratio</div>
                                <div class="value" id="interestRatioA">127%</div>
                            </div>
                            <div class="breakdown-item total-payment">
                                <div class="label">Total Paid</div>
                                <div class="value" id="totalPaymentA">$727,920</div>
                            </div>
                        </div>
                    </div>

                    <div class="summary-card card-b">
                        <div class="card-label">Mortgage B</div>
                        <div class="monthly-payment">
                            <div class="label">Monthly Payment</div>
                            <div class="amount" id="monthlyPaymentB">$2,699</div>
                        </div>
                        <div class="payment-breakdown">
                            <div class="breakdown-item principal">
                                <div class="label">Principal</div>
                                <div class="value" id="principalAmountB">$320,000</div>
                            </div>
                            <div class="breakdown-item interest">
                                <div class="label">Total Interest</div>
                                <div class="value" id="totalInterestB">$165,820</div>
                            </div>
                            <div class="breakdown-item total-interest">
                                <div class="label">Int/Prin Ratio</div>
                                <div class="value" id="interestRatioB">52%</div>
                            </div>
                            <div class="breakdown-item total-payment">
                                <div class="label">Total Paid</div>
                                <div class="value" id="totalPaymentB">$485,820</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="schedule-card">
                    <h3>ðŸ“… Amortization Schedule Comparison</h3>
                    <div class="toggle-buttons">
                        <button class="toggle-btn active" id="annualBtn">Annual</button>
                        <button class="toggle-btn" id="monthlyBtn">Monthly</button>
                    </div>
                    <div class="schedule-table-container">
                        <table class="schedule-table" id="scheduleTable">
                            <thead>
                                <tr>
                                    <th>Year</th>
                                    <th class="col-a">A Interest</th>
                                    <th class="col-a">A Principal</th>
                                    <th class="col-a">A Prin. Cum.</th>
                                    <th class="col-a">A Balance</th>
                                    <th class="col-b">B Interest</th>
                                    <th class="col-b">B Principal</th>
                                    <th class="col-b">B Prin. Cum.</th>
                                    <th class="col-b">B Balance</th>
                                    <th class="col-diff">
                                        <select class="diff-select" id="diffTypeSelect">
                                            <option value="balance">Balance Diff</option>
                                            <option value="interest">Interest Diff</option>
                                            <option value="principal">Principal Diff</option>
                                            <option value="principalCumulative">Prin. Cum. Diff</option>
                                        </select>
                                    </th>
                                    <th class="col-diff">Payment Diff</th>
                                </tr>
                            </thead>
                            <tbody id="scheduleBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="investment-card">
                    <h3>ðŸ’° Investment Growth Calculator (Monthly Payment Savings Invested)</h3>
                    <div class="investment-input-row">
                        <label>Monthly savings:</label>
                        <span class="unit">$</span>
                        <input type="number" id="investmentAmount" value="0" min="0" step="1" readonly style="background:#0d1117;">
                        <label id="savingsLabel">(auto-calculated from payment difference)</label>
                    </div>
                    <div class="investment-table-container">
                        <table class="investment-table" id="investmentTable">
                            <thead>
                                <tr>
                                    <th>Year</th>
                                    <th>0%</th>
                                    <th>2%</th>
                                    <th>4%</th>
                                    <th>6%</th>
                                    <th>8%</th>
                                    <th>10%</th>
                                    <th>12%</th>
                                    <th>14%</th>
                                    <th>16%</th>
                                </tr>
                            </thead>
                            <tbody id="investmentBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="investment-card lumpsum-card">
                    <h3>ðŸ’µ Lump Sum Investment Growth Calculator</h3>
                    <div class="investment-input-row">
                        <label>One-off investment:</label>
                        <span class="unit">$</span>
                        <input type="number" id="lumpSumAmount" value="10000" min="0" step="100">
                        <label>(enter your lump sum amount)</label>
                    </div>
                    <div class="investment-table-container">
                        <table class="investment-table lumpsum-table" id="lumpSumTable">
                            <thead>
                                <tr>
                                    <th>Year</th>
                                    <th>0%</th>
                                    <th>2%</th>
                                    <th>4%</th>
                                    <th>6%</th>
                                    <th>8%</th>
                                    <th>10%</th>
                                    <th>12%</th>
                                    <th>14%</th>
                                    <th>16%</th>
                                </tr>
                            </thead>
                            <tbody id="lumpSumBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script src="js/calculator.js"></script>
    <script src="js/chart.js"></script>
    <script src="js/investment.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
